{% extends "base-generic.html" %}

{% block content %}
{% load static %}

<main class="main-section p-12">

  <div class="modal-dialog">
    <div class="modal-content">
      <!-- general form elements -->
      <div class="card card-success">
        <div class="card-header">
          <h3 class="card-title">Registro</h3>
        </div>
        <!-- /.card-header -->
        <!-- form start -->
        <form action="" method="POST">
          {% csrf_token %}
          <div class="card-body">
            <div class="form-group">
              <label for="nomUsuario">Nombre de usuario</label>
              <input type="text" class="form-control" id="nomUsuario" placeholder="Nombre de usuario" name="username"
                required>
            </div>
            <div class="form-group">
              <label for="emailUsuario">Email</label>
              <input type="email" class="form-control" id="emailUsuario" placeholder="Email de usuario" name="email"
                required>
            </div>
            <div class="form-group">
              <label for="primerNombre">Nombre</label>
              <input type="text" class="form-control" id="primerNombre" placeholder="Nombre" name="first_name" required>
            </div>
            <div class="form-group">
              <label for="apellidoUsuario">Apellido</label>
              <input type="text" class="form-control" id="apellidoUsuario" placeholder="Apellido" name="last_name"
                required>
            </div>
            <div class="form-group">
              <label for="passUser">Contrase単a</label>
              <input type="password" class="form-control" id="passUser" placeholder="Ingrese contrase単a"
                name="password1" required>
            </div>
            <div class="form-group">
              <label for="passUser2">Confirmar contrase単a</label>
              <input type="password" class="form-control" id="passUser2" placeholder="Confirme contrase単a"
                name="password2" required>
            </div>
            <div class="form-group">
              <label for="groups">Grupo de usuario</label>
              <select name="groups" id="groups" class="custom-select" required>
                <option value="">Seleccionar grupo</option>
                {% for c in grupos %}
                <option value="{{ c.0 }}">{{c.1}}</option>
                {% endfor %}
              </select>
            </div>


          </div>
          <!-- /.card-body -->

          <div class="card-footer text-center">
            <input type="submit" class="btn btn-success" name="Registrar" value="Registrar">

          </div>
        </form>

      </div>

    </div>
  </div>

  </div>


    <div class="card card-success">
      <div class="card-header">
        <h2 class="card-title">Listado de Usuarios</h2>
      </div>
      <table class="table table-striped">
        <tr>
          <th>Nombre de Usuario</th>
          <th>Rol</th>
          <th>Nombre</th>
          <th>Apellido</th>
          <th>Email</th>
          <th>Modificar/Eliminar</th>
        </tr>
        {% for lu in ListaUsuarios %}
        <tr>
          <td>{{ lu }}</td>
          <td>{{ lu.groups.all.0 }}</td>
          <td>{{ lu.first_name }}</td>
          <td>{{ lu.last_name }}</td>
          <td>{{ lu.email }}</td>
          <td><a href="{%url 'modificar-usuario' lu %}" class="btn-xs btn-success">Modificar/Eliminar</a>
          </td>
        </tr>
        {% endfor %}

      </table>
      <!-- Fin de Tabla de listado de Proveedores -->
    </div>


</main>
{% if message %}
<script>
  alert('{{ message }}');
</script>
{%endif%}
{% endblock %}